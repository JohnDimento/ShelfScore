<div class="container mx-auto px-4 py-8">
  <% if flash[:error] %>
    <div class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4">
      <%= flash[:error] %>
    </div>
  <% end %>

  <% if flash[:notice] %>
    <div class="bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-4">
      <%= flash[:notice] %>
    </div>
  <% end %>

  <div class="mb-8">
    <h1 class="text-3xl font-bold mb-2"><%= @book.title %></h1>
    <p class="text-xl text-gray-600 mb-4">by <%= @book.author %></p>
    <p class="text-gray-700 mb-4"><%= @book.description %></p>
    <p class="text-gray-500">Published: <%= @book.published_year %></p>
  </div>

  <% if @quiz %>
    <div class="bg-white rounded-lg shadow-md p-6">
      <h2 class="text-2xl font-bold mb-6">Quiz: <%= @quiz.title %></h2>

      <% if @quiz.questions.any? %>
        <div class="space-y-6">
          <% @quiz.questions.each_with_index do |question, index| %>
            <div class="border rounded-lg p-4">
              <p class="font-semibold mb-3"><%= index + 1 %>. <%= question.content %></p>

              <div class="space-y-2">
                <% ['A', 'B', 'C', 'D'].each_with_index do |letter, i| %>
                  <div class="flex items-center">
                    <span class="mr-2 <%= question.correct_answer == letter ? 'text-green-600 font-bold' : '' %>">
                      <%= letter %>. <%= question.options[i] %>
                    </span>
                  </div>
                <% end %>
              </div>
            </div>
          <% end %>
        </div>
      <% else %>
        <p class="text-red-600">No questions available for this quiz.</p>
        <%= button_to "Generate New Questions",
                    book_quizzes_path(@book),
                    method: :post,
                    class: "mt-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 whitespace-nowrap" %>
      <% end %>
    </div>
  <% else %>
    <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-4">
      <p>No quiz available for this book yet.</p>
      <%= button_to "Generate Quiz",
                  book_quizzes_path(@book),
                  method: :post,
                  class: "mt-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 whitespace-nowrap" %>
    </div>
  <% end %>
</div>
